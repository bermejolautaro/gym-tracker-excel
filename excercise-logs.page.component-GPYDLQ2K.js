import{A as $,B as ye,C as be,D as we,E as he,F as Ee,b as O,c as S,d as W,e as le,f as h,h as Y,i as de,j as me,k as ue,p as xe,q as ge,r as fe,s as _e,t as ve,u as B,v as N,w as L,x as j,y as F,z as D}from"./chunk-W5T7TAKG.js";import{$ as R,A as re,Aa as C,B as v,Ba as T,Da as ae,E as ce,Ea as A,I as V,J as H,O as c,T as d,U as se,V as a,W as r,X as o,Y as _,Z as q,aa as m,c as I,fa as l,g as E,h as U,ha as u,ka as y,ma as x,na as g,q as te,r as ie,s as ne,ta as pe,u as oe,za as K}from"./chunk-WFGSCR6L.js";import"./chunk-LWEHNFHP.js";function J(e){return e}function b(){return O(Ce(!1),arguments,b.lazy)}var Ce=function(e){return function(t,i){return W(t,e?b.lazyIndexed(i):b.lazy(i),e)}},Re=function(e){return function(t){return function(i,s,n){return{done:!1,hasNext:!0,next:e?t(i,s,n):t(i)}}}};(function(e){function t(){return O(Ce(!0),arguments,e.lazyIndexed)}e.indexed=t,e.lazy=Re(!1),e.lazyIndexed=le(Re(!0)),e.strict=e})(b||(b={}));function Se(){return O(De,arguments,Ie)}function De(e,t){return W(e,Ie(t))}function Ie(e){var t=new Set;return function(i){var s=e(i);return t.has(s)?{done:!1,hasNext:!1}:(t.add(s),{done:!1,hasNext:!0,next:i})}}var Te=(()=>{let t=class{transform(s){return s??[]}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275pipe=ce({name:"ifNullEmptyArray",type:t,pure:!0,standalone:!0})})(),e})();function $e(e,t){if(e&1&&(r(0,"div",3),l(1),x(2,"titlecase"),o()),e&2){let i=m(2);c(1),u(" ",g(2,1,i.excerciseRow.excerciseName)," ")}}function Me(e,t){if(e&1&&(r(0,"div",3),l(1),o()),e&2){let i=m(2);c(1),u(" ",i.excerciseRow.date," ")}}function Pe(e,t){if(e&1&&(r(0,"div",3),l(1),x(2,"titlecase"),o()),e&2){let i=m(2);c(1),u(" ",g(2,1,i.excerciseRow.username)," ")}}function ke(e,t){if(e&1&&(r(0,"div",1),d(1,$e,3,3,"div",2),d(2,Me,2,1,"div",2),d(3,Pe,3,3,"div",2),o()),e&2){let i=m();c(1),a("ngIf",i.showExcercise),c(1),a("ngIf",i.showDate),c(1),a("ngIf",i.showUsername)}}var P=(()=>{let t=class{constructor(){this.showExcercise=!0,this.showDate=!0,this.showUsername=!0}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-row-title"]],inputs:{showExcercise:"showExcercise",showDate:"showDate",showUsername:"showUsername",excerciseRow:"excerciseRow"},standalone:!0,features:[y],decls:1,vars:1,consts:[["class","row w-100",4,"ngIf"],[1,"row","w-100"],["class","col d-flex align-items-center justify-content-center text-center",4,"ngIf"],[1,"col","d-flex","align-items-center","justify-content-center","text-center"]],template:function(n,p){n&1&&d(0,ke,4,3,"div",0),n&2&&a("ngIf",p.excerciseRow)},dependencies:[T,A],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]})})(),e})();function Ue(e,t){if(e&1&&(r(0,"tr",4)(1,"td",5),l(2),o(),r(3,"td",6),l(4),o(),r(5,"td",6),l(6),o()()),e&2){let i=t.$implicit;c(2),u("Serie ",i.serie,""),c(2),u("",i.reps," reps"),c(2),u("",i.weightKg,"kg")}}function Oe(e,t){if(e&1&&(r(0,"tr",4)(1,"td",5),l(2,"Total"),o(),r(3,"td",6),l(4),o(),r(5,"td",6),l(6),o()()),e&2){let i=m(2);c(4),u("",i.excerciseRow.total," reps"),c(2),u("",i.excerciseRow.series[0].weightKg,"kg")}}function Ge(e,t){if(e&1&&(r(0,"tr",4)(1,"td",5),l(2,"Average"),o(),r(3,"td",6),l(4),o(),r(5,"td",6),l(6),o()()),e&2){let i=m(2);c(4),u("",i.excerciseRow.average," reps"),c(2),u("",i.excerciseRow.series[0].weightKg,"kg")}}function ze(e,t){if(e&1&&(r(0,"table",1)(1,"tbody"),d(2,Ue,7,3,"tr",2),d(3,Oe,7,2,"tr",3),d(4,Ge,7,2,"tr",3),o()()),e&2){let i=m();c(2),a("ngForOf",i.excerciseRow.series),c(1),a("ngIf",i.excerciseRow.total),c(1),a("ngIf",i.excerciseRow.average)}}var k=(()=>{let t=class{},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-row-body"]],inputs:{excerciseRow:"excerciseRow"},standalone:!0,features:[y],decls:1,vars:1,consts:[["class","table table-striped m-0",4,"ngIf"],[1,"table","table-striped","m-0"],["class","row",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row"],[1,"fw-bold","col"],[1,"col","text-center"]],template:function(n,p){n&1&&d(0,ze,5,3,"table",0),n&2&&a("ngIf",p.excerciseRow)},dependencies:[C,T]})})(),e})();function Ve(e,t){if(e&1&&_(0,"app-excercise-row-body",7),e&2){let i=m().$implicit;a("excerciseRow",i)}}function He(e,t){if(e&1&&(r(0,"div",4)(1,"h2",5)(2,"button",6),_(3,"app-excercise-row-title",7),o()(),r(4,"div",8)(5,"div",9),d(6,Ve,1,1,"ng-template"),o()()()),e&2){let i=t.$implicit;a("ngClass",i.highlighted?"accordion-highlight "+i.highlighted:null),c(3),a("excerciseRow",i)}}var Ae=(()=>{let t=class{constructor(){this.excerciseRows=[]}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-rows"]],inputs:{excerciseRows:"excerciseRows"},standalone:!0,features:[y],decls:4,vars:1,consts:[[1,"row","my-2"],[1,"col"],["ngbAccordion",""],["ngbAccordionItem","",3,"ngClass",4,"ngFor","ngForOf"],["ngbAccordionItem","",3,"ngClass"],["ngbAccordionHeader",""],["ngbAccordionButton",""],[3,"excerciseRow"],["ngbAccordionCollapse",""],["ngbAccordionBody",""]],template:function(n,p){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3,He,7,2,"div",3),o()()()),n&2&&(c(3),a("ngForOf",p.excerciseRows))},dependencies:[C,K,$,L,D,F,j,B,N,P,k]})})(),e})();function qe(e,t){if(e&1&&_(0,"app-excercise-row-body",14),e&2){let i=m().$implicit;a("excerciseRow",i[1])}}function Ke(e,t){if(e&1&&(r(0,"div",12)(1,"h2",5)(2,"button",6),_(3,"app-excercise-row-title",13),o()(),r(4,"div",9)(5,"div",10),d(6,qe,1,1,"ng-template"),o()()()),e&2){let i=t.$implicit;a("ngClass",i[1].highlighted?"accordion-highlight "+i[1].highlighted:null),c(3),a("showUsername",!1)("showDate",!1)("excerciseRow",i[1])}}function We(e,t){if(e&1&&(r(0,"div",2),d(1,Ke,7,4,"div",11),o()),e&2){let i=m().$implicit;c(1),a("ngForOf",i[1])}}function Je(e,t){if(e&1&&(r(0,"div",4)(1,"h2",5)(2,"button",6)(3,"div",7)(4,"div",8),l(5),x(6,"titlecase"),o()()()(),r(7,"div",9)(8,"div",10),d(9,We,2,1,"ng-template"),o()()()),e&2){let i=t.$implicit;c(5),u(" ",g(6,1,i[0])," ")}}function Qe(e,t){if(e&1&&(r(0,"div",2),d(1,Je,10,3,"div",3),o()),e&2){let i=m().$implicit;c(1),a("ngForOf",i[1])}}function Xe(e,t){if(e&1&&(r(0,"div",4)(1,"h2",5)(2,"button",6)(3,"div",7)(4,"div",8),l(5),o()()()(),r(6,"div",9)(7,"div",10),d(8,Qe,2,1,"ng-template"),o()()()),e&2){let i=t.$implicit;c(5),u(" ",i[0]," ")}}var Be=(()=>{let t=class{constructor(){this.groupedExcerciseLogs=[]}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-grouped-excercise-rows"]],inputs:{groupedExcerciseLogs:"groupedExcerciseLogs"},standalone:!0,features:[y],decls:4,vars:1,consts:[[1,"row","my-2"],[1,"col"],["ngbAccordion",""],["ngbAccordionItem","",4,"ngFor","ngForOf"],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton",""],[1,"row","w-100"],[1,"col","d-flex","align-items-center","justify-content-center","text-center"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["ngbAccordionItem","",3,"ngClass",4,"ngFor","ngForOf"],["ngbAccordionItem","",3,"ngClass"],[3,"showUsername","showDate","excerciseRow"],[3,"excerciseRow"]],template:function(n,p){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3,Xe,9,1,"div",3),o()()()),n&2&&(c(3),a("ngForOf",p.groupedExcerciseLogs))},dependencies:[C,$,L,D,F,j,B,N,A,K,k,P]})})(),e})();function Ye(e,t){if(e&1&&_(0,"app-excercise-row-body",5),e&2){let i=m();a("excerciseRow",i.personalRecord)}}var Ne=(()=>{let t=class{},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-personal-record"]],inputs:{personalRecord:"personalRecord"},standalone:!0,features:[y],decls:10,vars:1,consts:[[1,"mb-3"],["ngbAccordion",""],["ngbAccordionItem","",1,"accordion-highlight","light-blue"],["ngbAccordionHeader",""],["ngbAccordionButton",""],[3,"excerciseRow"],["ngbAccordionCollapse",""],["ngbAccordionBody",""]],template:function(n,p){n&1&&(r(0,"h5",0),l(1,"Personal record"),o(),r(2,"div",1)(3,"div",2)(4,"h2",3)(5,"button",4),_(6,"app-excercise-row-title",5),o()(),r(7,"div",6)(8,"div",7),d(9,Ye,1,1,"ng-template"),o()()()()),n&2&&(c(6),a("excerciseRow",p.personalRecord))},dependencies:[P,k,$,L,D,F,j,B,N],styles:["[_nghost-%COMP%]{display:block}"]})})(),e})();function Ze(e,t){if(e&1){let i=q();r(0,"button",6),R("click",function(){let p=V(i).$implicit,f=m();return H(f.selectedTypeSubject.next(p))}),l(1),x(2,"titlecase"),o()}if(e&2){let i=t.$implicit;c(1),u(" ",g(2,1,i)," ")}}function et(e,t){if(e&1){let i=q();r(0,"button",6),R("click",function(){let p=V(i).$implicit,f=m();return H(f.selectedExcerciseSubject.next(p))}),l(1),x(2,"titlecase"),o()}if(e&2){let i=t.$implicit;c(1),u(" ",g(2,1,i)," ")}}function tt(e,t){if(e&1){let i=q();r(0,"button",6),R("click",function(){let p=V(i).$implicit,f=m();return H(f.selectedUsernameSubject.next(p))}),l(1),x(2,"titlecase"),o()}if(e&2){let i=t.$implicit;c(1),u(" ",g(2,1,i)," ")}}function it(e,t){if(e&1&&_(0,"app-personal-record",20),e&2){let i=t.ngIf;a("personalRecord",i)}}function nt(e,t){if(e&1&&(r(0,"div",16),d(1,it,1,1,"app-personal-record",17),x(2,"async"),r(3,"h5",18),l(4,"Log History"),o(),_(5,"app-grouped-excercise-rows",19),x(6,"ifNullEmptyArray"),x(7,"async"),o()),e&2){let i=m(2);c(1),a("ngIf",g(2,2,i.personalRecord$)),c(4),a("groupedExcerciseLogs",g(6,4,g(7,6,i.groupedLogs$)))}}function ot(e,t){if(e&1&&_(0,"app-personal-record",20),e&2){let i=t.ngIf;a("personalRecord",i)}}function rt(e,t){if(e&1&&(r(0,"div",16),d(1,ot,1,1,"app-personal-record",17),x(2,"async"),r(3,"h5",18),l(4,"Log History"),o(),_(5,"app-excercise-rows",21),x(6,"ifNullEmptyArray"),x(7,"async"),o()),e&2){let i=m(2);c(1),a("ngIf",g(2,2,i.personalRecord$)),c(4),a("excerciseRows",g(6,4,g(7,6,i.excerciseRows$)))}}function ct(e,t){if(e&1&&(r(0,"div"),d(1,nt,8,8,"div",15),d(2,rt,8,8,"div",15),o()),e&2){let i=m();c(1),a("ngIf",i.isGrouped),c(1),a("ngIf",!i.isGrouped)}}function st(e,t){e&1&&(r(0,"div",22)(1,"div",23)(2,"span",24),l(3,"Loading..."),o()()())}var Zt=(()=>{let t=class{constructor(){this.excerciseRowsSubject=new I([]),this.types=[],this.selectedTypeSubject=new I(null),this.excercisesSubject=new I([]),this.selectedExcerciseSubject=new I(null),this.usernames=[],this.selectedUsernameSubject=new I(null),this.groupedLogsSubject=new I([]),this.isGrouped=!1,this.isLoading=!0,this.excerciseLogApiService=re(xe),this.selectedType$=this.selectedTypeSubject.pipe(ne(null),ie(),oe(([s,n])=>{if(s===n||!n)return;let p=this.selectedExcerciseSubject.value,f=this.excerciseRowsSubject.value.find(w=>w.excerciseName===p)?.type;n!=f&&this.selectedExcerciseSubject.next(null)}),E(([,s])=>s??"Type")),this.selectedExcercise$=this.selectedExcerciseSubject.pipe(E(s=>s??"Excercise")),this.selectedUsername$=this.selectedUsernameSubject.pipe(E(s=>s??"Username")),this.excercises$=U([this.excercisesSubject,this.selectedTypeSubject]).pipe(E(([s,n])=>n?s.filter(p=>p.type===n):s),E(s=>s.map(n=>n.name))),this.excerciseRows$=U([this.excerciseRowsSubject,this.selectedExcerciseSubject,this.selectedTypeSubject,this.selectedUsernameSubject]).pipe(E(([s,n,p,f])=>S(s,p?h(w=>w.type===p):J,n?h(w=>w.excerciseName===n):J,f?h(w=>w.username===f):J))),this.groupedLogs$=U([this.groupedLogsSubject,this.selectedExcerciseSubject,this.selectedTypeSubject,this.selectedUsernameSubject]).pipe(E(([s,n,p,f])=>S(s,b(([ee,Q])=>{let Le=S(Q,h(([G])=>f?f===G:!0),b(([G,X])=>{let je=S(X,h(([z,Fe])=>p?Fe.type===p:!0),h(([z])=>n?z===n:!0),h(z=>z.length>0));return[G,je]}),h(([G,X])=>X.length>0));return[ee,Le]}),h(([ee,Q])=>Q.length>0)))),this.personalRecord$=U([this.selectedUsernameSubject,this.selectedExcerciseSubject]).pipe(E(([s,n])=>s&&n?ue(this.excerciseRowsSubject.value,n,s):null))}ngOnInit(){this.isLoading=!0,this.excerciseLogApiService.getExcerciseLogs().pipe(te(()=>this.isLoading=!1)).subscribe(s=>{this.groupedLogsSubject.next(de(s)),this.excerciseRowsSubject.next(me(this.groupedLogsSubject.value)),this.types=S(s,b(p=>p.type),Y()),this.usernames=S(s,b(p=>p.user),Y());let n=S(s,b(p=>({name:p.name,type:p.type})),Se(p=>p.name));this.excercisesSubject.next(n)})}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-logs-page"]],standalone:!0,features:[y],decls:43,vars:23,consts:[[1,"container","my-4"],[1,"row","mb-2"],[1,"col-6"],["ngbDropdown","",1,"d-flex","justify-content-center"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-primary","w-100"],["ngbDropdownMenu","",1,"w-100"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"col-12"],[1,"row"],[1,"form-check","form-switch","d-flex","align-items-center","gap-1"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[4,"ngIf","ngIfElse"],["loadingSpinner",""],["class","container",4,"ngIf"],[1,"container"],["class","mb-5",3,"personalRecord",4,"ngIf"],[1,"mb-3"],[3,"groupedExcerciseLogs"],[1,"mb-5",3,"personalRecord"],[3,"excerciseRows"],[1,"position-absolute","top-50","start-50","translate-middle"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(n,p){if(n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),l(5),x(6,"titlecase"),x(7,"async"),o(),r(8,"div",5)(9,"button",6),R("click",function(){return p.selectedTypeSubject.next(null)}),l(10,"Clear filter"),o(),d(11,Ze,3,3,"button",7),o()()(),r(12,"div",2)(13,"div",3)(14,"button",4),l(15),x(16,"titlecase"),x(17,"async"),o(),r(18,"div",5)(19,"button",6),R("click",function(){return p.selectedExcerciseSubject.next(null)}),l(20,"Clear filter"),o(),d(21,et,3,3,"button",7),x(22,"async"),o()()()(),r(23,"div",1)(24,"div",8)(25,"div",3)(26,"button",4),l(27),x(28,"titlecase"),x(29,"async"),o(),r(30,"div",5)(31,"button",6),R("click",function(){return p.selectedUsernameSubject.next(null)}),l(32,"Clear filter"),o(),d(33,tt,3,3,"button",7),o()()()(),r(34,"div",9)(35,"div",8)(36,"div",10)(37,"input",11),R("ngModelChange",function(w){return p.isGrouped=w}),o(),r(38,"label",12),l(39,"Grouped"),o()()()()(),d(40,ct,3,2,"div",13),d(41,st,4,0,"ng-template",null,14,pe)),n&2){let f=se(42);c(5),u(" ",g(6,9,g(7,11,p.selectedType$))," "),c(6),a("ngForOf",p.types),c(4),u(" ",g(16,13,g(17,15,p.selectedExcercise$))," "),c(6),a("ngForOf",g(22,17,p.excercises$)),c(6),u(" ",g(28,19,g(29,21,p.selectedUsername$))," "),c(6),a("ngForOf",p.usernames),c(4),a("ngModel",p.isGrouped),c(3),a("ngIf",!p.isLoading)("ngIfElse",f)}},dependencies:[C,T,ae,A,ve,ge,fe,_e,Ee,he,we,be,ye,Ne,Be,Ae,Te]})})(),e})();export{Zt as ExcerciseLogsPageComponent};
