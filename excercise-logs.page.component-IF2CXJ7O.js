import{A as L,B as M,C as P,D as be,E as he,F as ye,G as Ee,H as Ce,c as R,d as h,e as D,g as X,h as le,i as de,j as me,k as ge,m as ue,r as xe,s as fe,t as _e,u as ve,v as we,w as B,x as N,y as j,z as F}from"./chunk-2CZDP2ZG.js";import{$ as E,A as oe,B as v,Ba as I,Ca as C,Da as T,E as re,Fa as ae,Ga as A,I as H,J as z,O as c,T as l,U as ce,V as a,W as r,X as n,Y as _,Z as q,aa as m,c as S,da as Q,g as y,ga as d,h as O,ia as x,ja as se,ma as w,oa as g,pa as u,q as ee,r as te,s as ie,u as ne,va as pe}from"./chunk-DRW35B3H.js";import"./chunk-LWEHNFHP.js";function K(e){return e}var Re=(()=>{let t=class{transform(p){return p??[]}},e=t;return(()=>{t.\u0275fac=function(o){return new(o||t)}})(),(()=>{t.\u0275pipe=re({name:"ifNullEmptyArray",type:t,pure:!0,standalone:!0})})(),e})();function Ne(e,t){e&1&&_(0,"i",8)}function je(e,t){if(e&1&&(r(0,"div",6),d(1),g(2,"titlecase"),l(3,Ne,1,0,"i",7),n()),e&2){let i=m(2);Q("font-size",1,"rem"),c(1),x(" ",u(2,4,i.excerciseRow.excerciseName)," "),c(2),a("ngIf",i.showStar)}}function Fe(e,t){if(e&1&&(r(0,"div",4),l(1,je,4,6,"div",5),n()),e&2){let i=m();a("ngClass",i.showDate&&i.showUsername?"fw-semibold":null),c(1),a("ngIf",i.showExcercise)}}function Le(e,t){if(e&1&&(r(0,"div",9),d(1),g(2,"titlecase"),n()),e&2){let i=m();Q("font-size",.8,"rem"),c(1),se(" ",i.excerciseRow.date," - ",u(2,4,i.excerciseRow.username)," ")}}var k=(()=>{let t=class{constructor(){this.showStar=!1,this.showExcercise=!0,this.showDate=!0,this.showUsername=!0}},e=t;return(()=>{t.\u0275fac=function(o){return new(o||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-row-title"]],inputs:{showStar:"showStar",showExcercise:"showExcercise",showDate:"showDate",showUsername:"showUsername",excerciseRow:"excerciseRow"},standalone:!0,features:[w],decls:4,vars:2,consts:[[1,"w-100"],["class","row w-100 pb-1",3,"ngClass",4,"ngIf"],[1,"row"],["class","col d-flex text-muted",3,"fontSize",4,"ngIf"],[1,"row","w-100","pb-1",3,"ngClass"],["class","col d-flex align-items-center gap-1",3,"fontSize",4,"ngIf"],[1,"col","d-flex","align-items-center","gap-1"],["class","fa fa-star",4,"ngIf"],[1,"fa","fa-star"],[1,"col","d-flex","text-muted"]],template:function(o,s){o&1&&(r(0,"div",0),l(1,Fe,2,2,"div",1),r(2,"div",2),l(3,Le,3,6,"div",3),n()()),o&2&&(c(1),a("ngIf",s.excerciseRow),c(2),a("ngIf",s.showDate))},dependencies:[T,I,A],styles:["[_nghost-%COMP%]{display:flex;flex:1}"],changeDetection:0})})(),e})();function Me(e,t){if(e&1&&(r(0,"tr",4)(1,"td",5),d(2),n(),r(3,"td",6),d(4),n(),r(5,"td",6),d(6),n()()),e&2){let i=t.$implicit;c(2),x("Serie ",i.serie,""),c(2),x("",i.reps," reps"),c(2),x("",i.weightKg,"kg")}}function Pe(e,t){if(e&1&&(r(0,"tr",4)(1,"td",5),d(2,"Total"),n(),r(3,"td",6),d(4),n(),r(5,"td",6),d(6),n()()),e&2){let i=m(2);c(4),x("",i.excerciseRow.total," reps"),c(2),x("",i.excerciseRow.series[0].weightKg,"kg")}}function $e(e,t){if(e&1&&(r(0,"tr",4)(1,"td",5),d(2,"Average"),n(),r(3,"td",6),d(4),n(),r(5,"td",6),d(6),n()()),e&2){let i=m(2);c(4),x("",i.excerciseRow.average," reps"),c(2),x("",i.excerciseRow.series[0].weightKg,"kg")}}function ke(e,t){if(e&1&&(r(0,"table",1)(1,"tbody"),l(2,Me,7,3,"tr",2),l(3,Pe,7,2,"tr",3),l(4,$e,7,2,"tr",3),r(5,"tr",4)(6,"td",5),d(7,"Tonnage"),n(),r(8,"td",6),d(9,"\xA0"),n(),r(10,"td",6),d(11),n()()()()),e&2){let i=m();c(2),a("ngForOf",i.excerciseRow.series),c(1),a("ngIf",i.excerciseRow.total),c(1),a("ngIf",i.excerciseRow.average),c(7),x("",i.excerciseRow.tonnage,"kg")}}var U=(()=>{let t=class{},e=t;return(()=>{t.\u0275fac=function(o){return new(o||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-row-body"]],inputs:{excerciseRow:"excerciseRow"},standalone:!0,features:[w],decls:1,vars:1,consts:[["class","table table-striped table-sm m-0",4,"ngIf"],[1,"table","table-striped","table-sm","m-0"],["class","row",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row"],[1,"fw-bold","col"],[1,"col","text-center"]],template:function(o,s){o&1&&l(0,ke,12,4,"table",0),o&2&&a("ngIf",s.excerciseRow)},dependencies:[C,T],changeDetection:0})})(),e})();function Ue(e,t){if(e&1&&_(0,"app-excercise-row-body",7),e&2){let i=m().$implicit;a("excerciseRow",i)}}function Oe(e,t){if(e&1&&(r(0,"div",4)(1,"h2",5)(2,"button",6),_(3,"app-excercise-row-title",7),n()(),r(4,"div",8)(5,"div",9),l(6,Ue,1,1,"ng-template"),n()()()),e&2){let i=t.$implicit;a("ngClass",i.highlighted?"accordion-highlight "+i.highlighted:null),c(3),a("excerciseRow",i)}}var Se=(()=>{let t=class{constructor(){this.excerciseRows=[]}},e=t;return(()=>{t.\u0275fac=function(o){return new(o||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-rows"]],inputs:{excerciseRows:"excerciseRows"},standalone:!0,features:[w],decls:4,vars:1,consts:[[1,"row","my-2"],[1,"col"],["ngbAccordion",""],["ngbAccordionItem","",3,"ngClass",4,"ngFor","ngForOf"],["ngbAccordionItem","",3,"ngClass"],["ngbAccordionHeader",""],["ngbAccordionButton",""],[3,"excerciseRow"],["ngbAccordionCollapse",""],["ngbAccordionBody",""]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),l(3,Oe,7,2,"div",3),n()()()),o&2&&(c(3),a("ngForOf",s.excerciseRows))},dependencies:[C,I,P,j,M,L,F,B,N,k,U],changeDetection:0})})(),e})();function Ge(e,t){if(e&1&&_(0,"app-excercise-row-body",14),e&2){let i=m().$implicit;a("excerciseRow",i[1])}}function Ve(e,t){if(e&1&&(r(0,"div",12)(1,"h2",5)(2,"button",6),_(3,"app-excercise-row-title",13),n()(),r(4,"div",9)(5,"div",10),l(6,Ge,1,1,"ng-template"),n()()()),e&2){let i=t.$implicit;a("ngClass",i[1].highlighted?"accordion-highlight "+i[1].highlighted:null),c(3),a("showUsername",!1)("showDate",!1)("excerciseRow",i[1])}}function He(e,t){if(e&1&&(r(0,"div",2),l(1,Ve,7,4,"div",11),n()),e&2){let i=m().$implicit;c(1),a("ngForOf",i[1])}}function ze(e,t){if(e&1&&(r(0,"div",4)(1,"h2",5)(2,"button",6)(3,"div",7)(4,"div",8),d(5),g(6,"titlecase"),n()()()(),r(7,"div",9)(8,"div",10),l(9,He,2,1,"ng-template"),n()()()),e&2){let i=t.$implicit;c(5),x(" ",u(6,1,i[0])," ")}}function qe(e,t){if(e&1&&(r(0,"div",2),l(1,ze,10,3,"div",3),n()),e&2){let i=m().$implicit;c(1),a("ngForOf",i[1])}}function Ke(e,t){if(e&1&&(r(0,"div",4)(1,"h2",5)(2,"button",6)(3,"div",7)(4,"div",8),d(5),n()()()(),r(6,"div",9)(7,"div",10),l(8,qe,2,1,"ng-template"),n()()()),e&2){let i=t.$implicit;c(5),x(" ",i[0]," ")}}var Ie=(()=>{let t=class{constructor(){this.groupedExcerciseLogs=[]}},e=t;return(()=>{t.\u0275fac=function(o){return new(o||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-grouped-excercise-rows"]],inputs:{groupedExcerciseLogs:"groupedExcerciseLogs"},standalone:!0,features:[w],decls:4,vars:1,consts:[[1,"row","my-2"],[1,"col"],["ngbAccordion",""],["ngbAccordionItem","",4,"ngFor","ngForOf"],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton",""],[1,"row","w-100"],[1,"col","d-flex","align-items-center","justify-content-center","text-center"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["ngbAccordionItem","",3,"ngClass",4,"ngFor","ngForOf"],["ngbAccordionItem","",3,"ngClass"],[3,"showUsername","showDate","excerciseRow"],[3,"excerciseRow"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),l(3,Ke,9,1,"div",3),n()()()),o&2&&(c(3),a("ngForOf",s.groupedExcerciseLogs))},dependencies:[C,P,j,M,L,F,B,N,A,I,U,k],changeDetection:0})})(),e})();function We(e,t){if(e&1&&_(0,"app-excercise-row-body",7),e&2){let i=m();a("excerciseRow",i.personalRecord)}}var Te=(()=>{let t=class{},e=t;return(()=>{t.\u0275fac=function(o){return new(o||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-personal-record"]],inputs:{personalRecord:"personalRecord"},standalone:!0,features:[w],decls:8,vars:2,consts:[["ngbAccordion",""],["ngbAccordionItem","",1,"accordion-highlight","light-blue"],["ngbAccordionHeader",""],["ngbAccordionButton",""],[3,"excerciseRow","showStar"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[3,"excerciseRow"]],template:function(o,s){o&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2)(3,"button",3),_(4,"app-excercise-row-title",4),n()(),r(5,"div",5)(6,"div",6),l(7,We,1,1,"ng-template"),n()()()()),o&2&&(c(4),a("excerciseRow",s.personalRecord)("showStar",!0))},dependencies:[k,U,P,j,M,L,F,B,N],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})})(),e})();function Je(e,t){if(e&1){let i=q();r(0,"button",6),E("click",function(){let s=H(i).$implicit,f=m();return z(f.selectedTypeSubject.next(s))}),d(1),g(2,"titlecase"),n()}if(e&2){let i=t.$implicit;c(1),x(" ",u(2,1,i)," ")}}function Qe(e,t){if(e&1){let i=q();r(0,"button",6),E("click",function(){let s=H(i).$implicit,f=m();return z(f.selectedExcerciseSubject.next(s))}),d(1),g(2,"titlecase"),n()}if(e&2){let i=t.$implicit;c(1),x(" ",u(2,1,i)," ")}}function Xe(e,t){if(e&1){let i=q();r(0,"button",6),E("click",function(){let s=H(i).$implicit,f=m();return z(f.selectedUsernameSubject.next(s))}),d(1),g(2,"titlecase"),n()}if(e&2){let i=t.$implicit;c(1),x(" ",u(2,1,i)," ")}}function Ye(e,t){if(e&1&&_(0,"app-personal-record",23),e&2){let i=t.ngIf;a("personalRecord",i)}}function Ze(e,t){if(e&1&&(r(0,"div",20),l(1,Ye,1,1,"app-personal-record",21),g(2,"async"),_(3,"app-grouped-excercise-rows",22),g(4,"ifNullEmptyArray"),g(5,"async"),n()),e&2){let i=m(2);c(1),a("ngIf",u(2,2,i.personalRecord$)),c(2),a("groupedExcerciseLogs",u(4,4,u(5,6,i.groupedLogs$)))}}function et(e,t){if(e&1&&_(0,"app-personal-record",23),e&2){let i=t.ngIf;a("personalRecord",i)}}function tt(e,t){if(e&1&&(r(0,"div",20),l(1,et,1,1,"app-personal-record",21),g(2,"async"),_(3,"app-excercise-rows",24),g(4,"ifNullEmptyArray"),g(5,"async"),n()),e&2){let i=m(2);c(1),a("ngIf",u(2,2,i.personalRecord$)),c(2),a("excerciseRows",u(4,4,u(5,6,i.excerciseRows$)))}}function it(e,t){if(e&1&&(r(0,"div"),l(1,Ze,6,8,"div",19),l(2,tt,6,8,"div",19),n()),e&2){let i=m();c(1),a("ngIf",i.isGrouped),c(1),a("ngIf",!i.isGrouped)}}function nt(e,t){e&1&&(r(0,"div",25)(1,"div",26)(2,"span",27),d(3,"Loading..."),n()()())}var Vt=(()=>{let t=class{constructor(){this.excerciseRowsSubject=new S([]),this.types=[],this.selectedTypeSubject=new S(null),this.excercisesSubject=new S([]),this.selectedExcerciseSubject=new S(null),this.usernames=[],this.selectedUsernameSubject=new S(null),this.groupedLogsSubject=new S([]),this.isGrouped=!1,this.isLoading=!0,this.excerciseLogApiService=oe(xe),this.selectedType$=this.selectedTypeSubject.pipe(ie(null),te(),ne(([p,o])=>{if(p===o||!o)return;let s=this.selectedExcerciseSubject.value,f=this.excerciseRowsSubject.value.find(b=>b.excerciseName===s)?.type;o!=f&&this.selectedExcerciseSubject.next(null)}),y(([,p])=>p??"Type")),this.selectedExcercise$=this.selectedExcerciseSubject.pipe(y(p=>p??"Excercise")),this.selectedUsername$=this.selectedUsernameSubject.pipe(y(p=>p??"Username")),this.excercises$=O([this.excercisesSubject,this.selectedTypeSubject]).pipe(y(([p,o])=>o?p.filter(s=>s.type===o):p),y(p=>p.map(o=>o.name))),this.excerciseRows$=O([this.excerciseRowsSubject,this.selectedExcerciseSubject,this.selectedTypeSubject,this.selectedUsernameSubject]).pipe(y(([p,o,s,f])=>R(p,s?h(b=>b.type===s):K,o?h(b=>b.excerciseName===o):K,f?h(b=>b.username===f):K))),this.groupedLogs$=O([this.groupedLogsSubject,this.selectedExcerciseSubject,this.selectedTypeSubject,this.selectedUsernameSubject]).pipe(y(([p,o,s,f])=>R(p,D(([Z,W])=>{let Ae=R(W,h(([G])=>f?f===G:!0),D(([G,J])=>{let De=R(J,h(([V,Be])=>s?Be.type===s:!0),h(([V])=>o?V===o:!0),h(V=>V.length>0));return[G,De]}),h(([G,J])=>J.length>0));return[Z,Ae]}),h(([Z,W])=>W.length>0)))),this.personalRecord$=O([this.selectedUsernameSubject,this.selectedExcerciseSubject]).pipe(y(([p,o])=>p&&o?ue(this.excerciseRowsSubject.value,o,p):null))}ngOnInit(){this.isLoading=!0,this.excerciseLogApiService.getExcerciseLogs().pipe(ee(()=>this.isLoading=!1)).subscribe(p=>{this.groupedLogsSubject.next(de(p)),this.excerciseRowsSubject.next(me(this.groupedLogsSubject.value)),this.types=R(p,D(s=>s.type),X()),this.usernames=R(p,D(s=>s.user),X());let o=R(p,D(s=>({name:s.name,type:s.type})),le(s=>s.name));this.excercisesSubject.next(o),console.log(ge(this.excerciseRowsSubject.value))})}},e=t;return(()=>{t.\u0275fac=function(o){return new(o||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-excercise-logs-page"]],standalone:!0,features:[w],decls:46,vars:23,consts:[[1,"container","my-4"],[1,"row","mb-2","gx-2"],[1,"col-6"],["ngbDropdown","",1,"d-flex","justify-content-center"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-primary","w-100","d-flex","justify-content-between","align-items-center"],["ngbDropdownMenu","",1,"w-100"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[2,"overflow","scroll","max-height","400px"],[1,"d-flex","justify-content-center","align-items-center","border-top","border-1"],[1,"fa","fa-caret-down"],[1,"row","mb-2"],[1,"col-12"],[1,"row"],[1,"form-check","form-switch","d-flex","align-items-center","gap-1"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[4,"ngIf","ngIfElse"],["loadingSpinner",""],["class","container",4,"ngIf"],[1,"container"],["class","mb-3",3,"personalRecord",4,"ngIf"],[3,"groupedExcerciseLogs"],[1,"mb-3",3,"personalRecord"],[3,"excerciseRows"],[1,"position-absolute","top-50","start-50","translate-middle"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(o,s){if(o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),d(5),g(6,"titlecase"),g(7,"async"),n(),r(8,"div",5)(9,"button",6),E("click",function(){return s.selectedTypeSubject.next(null)}),d(10,"Clear filter"),n(),l(11,Je,3,3,"button",7),n()()(),r(12,"div",2)(13,"div",3)(14,"button",4),d(15),g(16,"titlecase"),g(17,"async"),n(),r(18,"div",5)(19,"div",8)(20,"button",6),E("click",function(){return s.selectedExcerciseSubject.next(null)}),d(21,"Clear filter"),n(),l(22,Qe,3,3,"button",7),g(23,"async"),n(),r(24,"div",9),_(25,"i",10),n()()()()(),r(26,"div",11)(27,"div",12)(28,"div",3)(29,"button",4),d(30),g(31,"titlecase"),g(32,"async"),n(),r(33,"div",5)(34,"button",6),E("click",function(){return s.selectedUsernameSubject.next(null)}),d(35,"Clear filter"),n(),l(36,Xe,3,3,"button",7),n()()()(),r(37,"div",13)(38,"div",12)(39,"div",14)(40,"input",15),E("ngModelChange",function(b){return s.isGrouped=b}),n(),r(41,"label",16),d(42,"Grouped"),n()()()()(),l(43,it,3,2,"div",17),l(44,nt,4,0,"ng-template",null,18,pe)),o&2){let f=ce(45);c(5),x(" ",u(6,9,u(7,11,s.selectedType$))," "),c(6),a("ngForOf",s.types),c(4),x(" ",u(16,13,u(17,15,s.selectedExcercise$))," "),c(7),a("ngForOf",u(23,17,s.excercises$)),c(8),x(" ",u(31,19,u(32,21,s.selectedUsername$))," "),c(6),a("ngForOf",s.usernames),c(4),a("ngModel",s.isGrouped),c(3),a("ngIf",!s.isLoading)("ngIfElse",f)}},dependencies:[C,T,we,fe,_e,ve,ae,A,Re,Te,Ie,Se,Ce,Ee,ye,he,be],changeDetection:0})})(),e})();export{Vt as ExcerciseLogsPageComponent};
