import{A as j,B as $,C as F,D as P,E as De,F as Ne,G as Be,H as Le,I as je,J as $e,c as R,d as y,e as D,g as Z,h as he,i as we,j as be,k as ye,m as Ce,r as Ee,s as Re,t as Se,u as Te,v as Ie,w as Ae,x as N,y as B,z as L}from"./chunk-V7IOVW5Q.js";import{$ as c,Aa as xe,Ca as fe,Da as _e,E as le,F as h,I as de,Ka as T,La as E,M as q,Ma as I,N as Q,Oa as ve,Pa as A,S as s,Y as l,Z as me,_ as p,aa as r,b as X,ba as v,c as S,ca as K,ea as C,fa as g,g as b,h as V,ia as Y,la as d,m as te,n as ie,na as _,oa as ge,q as ne,r as oe,ra as w,t as re,u as ce,ua as x,v as se,va as f,y as ae,z as pe,za as ue}from"./chunk-EBOUZTM6.js";import"./chunk-LWEHNFHP.js";function W(e){return e}var Fe=(()=>{let t=class{transform(a){return a??[]}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275pipe=de({name:"ifNullEmptyArray",type:t,pure:!0,standalone:!0})})(),e})();function Ve(e,t){e&1&&v(0,"i",8)}function He(e,t){if(e&1&&(c(0,"div",6),d(1),x(2,"titlecase"),l(3,Ve,1,0,"i",7),r()),e&2){let i=g(2);Y("font-size",1,"rem"),s(1),_(" ",f(2,4,i.excerciseRow.excerciseName)," "),s(2),p("ngIf",i.showStar)}}function ze(e,t){if(e&1&&(c(0,"div",4),l(1,He,4,6,"div",5),r()),e&2){let i=g();p("ngClass",i.showDate&&i.showUsername?"fw-semibold":null),s(1),p("ngIf",i.showExcercise)}}function qe(e,t){if(e&1&&(c(0,"div",9),d(1),x(2,"titlecase"),r()),e&2){let i=g();Y("font-size",.8,"rem"),s(1),ge(" ",i.excerciseRow.date," - ",f(2,4,i.excerciseRow.username)," ")}}var k=(()=>{let t=class{constructor(){this.showStar=!1,this.showExcercise=!0,this.showDate=!0,this.showUsername=!0}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=h({type:t,selectors:[["app-excercise-row-title"]],inputs:{showStar:"showStar",showExcercise:"showExcercise",showDate:"showDate",showUsername:"showUsername",excerciseRow:"excerciseRow"},standalone:!0,features:[w],decls:4,vars:2,consts:[[1,"w-100"],["class","row w-100 pb-1",3,"ngClass",4,"ngIf"],[1,"row"],["class","col d-flex text-muted",3,"fontSize",4,"ngIf"],[1,"row","w-100","pb-1",3,"ngClass"],["class","col d-flex align-items-center gap-1",3,"fontSize",4,"ngIf"],[1,"col","d-flex","align-items-center","gap-1"],["class","fa fa-star",4,"ngIf"],[1,"fa","fa-star"],[1,"col","d-flex","text-muted"]],template:function(n,o){n&1&&(c(0,"div",0),l(1,ze,2,2,"div",1),c(2,"div",2),l(3,qe,3,6,"div",3),r()()),n&2&&(s(1),p("ngIf",o.excerciseRow),s(2),p("ngIf",o.showDate))},dependencies:[I,T,A],styles:["[_nghost-%COMP%]{display:flex;flex:1}"],changeDetection:0})})(),e})();function Qe(e,t){if(e&1&&(c(0,"tr",4)(1,"td",5),d(2),r(),c(3,"td",6),d(4),r(),c(5,"td",6),d(6),r()()),e&2){let i=t.$implicit;s(2),_("Serie ",i.serie,""),s(2),_("",i.reps," reps"),s(2),_("",i.weightKg,"kg")}}function Ke(e,t){if(e&1&&(c(0,"tr",4)(1,"td",5),d(2,"Total"),r(),c(3,"td",6),d(4),r(),c(5,"td",6),d(6),r()()),e&2){let i=g(2);s(4),_("",i.excerciseRow.total," reps"),s(2),_("",i.excerciseRow.series[0].weightKg,"kg")}}function We(e,t){if(e&1&&(c(0,"tr",4)(1,"td",5),d(2,"Average"),r(),c(3,"td",6),d(4),r(),c(5,"td",6),d(6),r()()),e&2){let i=g(2);s(4),_("",i.excerciseRow.average," reps"),s(2),_("",i.excerciseRow.series[0].weightKg,"kg")}}function Je(e,t){if(e&1&&(c(0,"table",1)(1,"tbody"),l(2,Qe,7,3,"tr",2),l(3,Ke,7,2,"tr",3),l(4,We,7,2,"tr",3),c(5,"tr",4)(6,"td",5),d(7,"Tonnage"),r(),c(8,"td",6),d(9,"\xA0"),r(),c(10,"td",6),d(11),r()()()()),e&2){let i=g();s(2),p("ngForOf",i.excerciseRow.series),s(1),p("ngIf",i.excerciseRow.total),s(1),p("ngIf",i.excerciseRow.average),s(7),_("",i.excerciseRow.tonnage,"kg")}}var U=(()=>{let t=class{},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=h({type:t,selectors:[["app-excercise-row-body"]],inputs:{excerciseRow:"excerciseRow"},standalone:!0,features:[w],decls:1,vars:1,consts:[["class","table table-striped table-sm m-0",4,"ngIf"],[1,"table","table-striped","table-sm","m-0"],["class","row",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row"],[1,"fw-bold","col"],[1,"col","text-center"]],template:function(n,o){n&1&&l(0,Je,12,4,"table",0),n&2&&p("ngIf",o.excerciseRow)},dependencies:[E,I],changeDetection:0})})(),e})();function Xe(e,t){if(e&1&&v(0,"app-excercise-row-body",7),e&2){let i=g().$implicit;p("excerciseRow",i)}}function Ye(e,t){if(e&1&&(c(0,"div",4)(1,"h2",5)(2,"button",6),v(3,"app-excercise-row-title",7),r()(),c(4,"div",8)(5,"div",9),l(6,Xe,1,1,"ng-template"),r()()()),e&2){let i=t.$implicit;p("ngClass",i.highlighted?"accordion-highlight "+i.highlighted:null),s(3),p("excerciseRow",i)}}var Pe=(()=>{let t=class{constructor(){this.excerciseRows=[]}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=h({type:t,selectors:[["app-excercise-rows"]],inputs:{excerciseRows:"excerciseRows"},standalone:!0,features:[w],decls:4,vars:1,consts:[[1,"row","my-2"],[1,"col"],["ngbAccordion",""],["ngbAccordionItem","",3,"ngClass",4,"ngFor","ngForOf"],["ngbAccordionItem","",3,"ngClass"],["ngbAccordionHeader",""],["ngbAccordionButton",""],[3,"excerciseRow"],["ngbAccordionCollapse",""],["ngbAccordionBody",""]],template:function(n,o){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2),l(3,Ye,7,2,"div",3),r()()()),n&2&&(s(3),p("ngForOf",o.excerciseRows))},dependencies:[E,T,P,L,F,$,j,N,B,k,U],changeDetection:0})})(),e})();function Ze(e,t){if(e&1&&v(0,"app-excercise-row-body",14),e&2){let i=g().$implicit;p("excerciseRow",i[1])}}function et(e,t){if(e&1&&(c(0,"div",12)(1,"h2",5)(2,"button",6),v(3,"app-excercise-row-title",13),r()(),c(4,"div",9)(5,"div",10),l(6,Ze,1,1,"ng-template"),r()()()),e&2){let i=t.$implicit;p("ngClass",i[1].highlighted?"accordion-highlight "+i[1].highlighted:null),s(3),p("showUsername",!1)("showDate",!1)("excerciseRow",i[1])}}function tt(e,t){if(e&1&&(c(0,"div",2),l(1,et,7,4,"div",11),r()),e&2){let i=g().$implicit;s(1),p("ngForOf",i[1])}}function it(e,t){if(e&1&&(c(0,"div",4)(1,"h2",5)(2,"button",6)(3,"div",7)(4,"div",8),d(5),x(6,"titlecase"),r()()()(),c(7,"div",9)(8,"div",10),l(9,tt,2,1,"ng-template"),r()()()),e&2){let i=t.$implicit;s(5),_(" ",f(6,1,i[0])," ")}}function nt(e,t){if(e&1&&(c(0,"div",2),l(1,it,10,3,"div",3),r()),e&2){let i=g().$implicit;s(1),p("ngForOf",i[1])}}function ot(e,t){if(e&1&&(c(0,"div",4)(1,"h2",5)(2,"button",6)(3,"div",7)(4,"div",8),d(5),r()()()(),c(6,"div",9)(7,"div",10),l(8,nt,2,1,"ng-template"),r()()()),e&2){let i=t.$implicit;s(5),_(" ",i[0]," ")}}var Me=(()=>{let t=class{constructor(){this.groupedExcerciseLogs=[]}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=h({type:t,selectors:[["app-grouped-excercise-rows"]],inputs:{groupedExcerciseLogs:"groupedExcerciseLogs"},standalone:!0,features:[w],decls:4,vars:1,consts:[[1,"row","my-2"],[1,"col"],["ngbAccordion",""],["ngbAccordionItem","",4,"ngFor","ngForOf"],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton",""],[1,"row","w-100"],[1,"col","d-flex","align-items-center","justify-content-center","text-center"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["ngbAccordionItem","",3,"ngClass",4,"ngFor","ngForOf"],["ngbAccordionItem","",3,"ngClass"],[3,"showUsername","showDate","excerciseRow"],[3,"excerciseRow"]],template:function(n,o){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2),l(3,ot,9,1,"div",3),r()()()),n&2&&(s(3),p("ngForOf",o.groupedExcerciseLogs))},dependencies:[E,P,L,F,$,j,N,B,A,T,U,k],changeDetection:0})})(),e})();function rt(e,t){if(e&1&&v(0,"app-excercise-row-body",7),e&2){let i=g();p("excerciseRow",i.personalRecord)}}var ke=(()=>{let t=class{},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=h({type:t,selectors:[["app-personal-record"]],inputs:{personalRecord:"personalRecord"},standalone:!0,features:[w],decls:8,vars:2,consts:[["ngbAccordion",""],["ngbAccordionItem","",1,"accordion-highlight","light-blue"],["ngbAccordionHeader",""],["ngbAccordionButton",""],[3,"excerciseRow","showStar"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[3,"excerciseRow"]],template:function(n,o){n&1&&(c(0,"div",0)(1,"div",1)(2,"h2",2)(3,"button",3),v(4,"app-excercise-row-title",4),r()(),c(5,"div",5)(6,"div",6),l(7,rt,1,1,"ng-template"),r()()()()),n&2&&(s(4),p("excerciseRow",o.personalRecord)("showStar",!0))},dependencies:[k,U,P,L,F,$,j,N,B],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})})(),e})();var ct=["instance"];function st(e,t){if(e&1){let i=K();c(0,"button",8),C("click",function(){let o=q(i).$implicit,m=g();return Q(m.selectedTypeSubject.next(o))}),d(1),x(2,"titlecase"),r()}if(e&2){let i=t.$implicit;s(1),_(" ",f(2,1,i)," ")}}function at(e,t){if(e&1){let i=K();c(0,"button",8),C("click",function(){let o=q(i).$implicit,m=g();return Q(m.selectedExcerciseSubject.next(o))}),d(1),x(2,"titlecase"),r()}if(e&2){let i=t.$implicit;s(1),_(" ",f(2,1,i)," ")}}function pt(e,t){if(e&1){let i=K();c(0,"button",8),C("click",function(){let o=q(i).$implicit,m=g();return Q(m.selectedUsernameSubject.next(o))}),d(1),x(2,"titlecase"),r()}if(e&2){let i=t.$implicit;s(1),_(" ",f(2,1,i)," ")}}function lt(e,t){if(e&1&&v(0,"app-personal-record",25),e&2){let i=t.ngIf;p("personalRecord",i)}}function dt(e,t){if(e&1&&(c(0,"div",22),l(1,lt,1,1,"app-personal-record",23),x(2,"async"),v(3,"app-grouped-excercise-rows",24),x(4,"ifNullEmptyArray"),x(5,"async"),r()),e&2){let i=g(2);s(1),p("ngIf",f(2,2,i.personalRecord$)),s(2),p("groupedExcerciseLogs",f(4,4,f(5,6,i.groupedLogs$)))}}function mt(e,t){if(e&1&&v(0,"app-personal-record",25),e&2){let i=t.ngIf;p("personalRecord",i)}}function gt(e,t){if(e&1&&(c(0,"div",22),l(1,mt,1,1,"app-personal-record",23),x(2,"async"),v(3,"app-excercise-rows",26),x(4,"ifNullEmptyArray"),x(5,"async"),r()),e&2){let i=g(2);s(1),p("ngIf",f(2,2,i.personalRecord$)),s(2),p("excerciseRows",f(4,4,f(5,6,i.excerciseRows$)))}}function ut(e,t){if(e&1&&(c(0,"div"),l(1,dt,6,8,"div",21),l(2,gt,6,8,"div",21),r()),e&2){let i=g();s(1),p("ngIf",i.isGrouped),s(1),p("ngIf",!i.isGrouped)}}function xt(e,t){e&1&&(c(0,"div",27)(1,"div",28)(2,"span",29),d(3,"Loading..."),r()()())}var ii=(()=>{let t=class{onExcerciseTypeaheadChange(a){this.selectedExcerciseSubject.next(a)}constructor(){this.excerciseRowsSubject=new S([]),this.types=[],this.selectedTypeSubject=new S(null),this.excercisesSubject=new S([]),this.selectedExcerciseSubject=new S(null),this.usernames=[],this.selectedUsernameSubject=new S(null),this.groupedLogsSubject=new S([]),this.isGrouped=!1,this.isLoading=!0,this.excerciseTypeAhead="",this.instance=null,this.focus$=new X,this.click$=new X,this.search=a=>{let n=a.pipe(oe()),o=this.click$.pipe(ne(100),ie(()=>!this.instance.isPopupOpen()),b(u=>"")),m=this.focus$;return te(n,m,o).pipe(pe(this.excercises$),b(([u,O])=>u===""?O:O.filter(G=>G.toLowerCase().includes(u.toLowerCase()))))},this.excerciseLogApiService=le(Ee),this.selectedType$=this.selectedTypeSubject.pipe(se(null),ce(),ae(([a,n])=>{if(a===n||!n)return;let o=this.selectedExcerciseSubject.value,m=this.excerciseRowsSubject.value.find(u=>u.excerciseName===o)?.type;n!=m&&this.selectedExcerciseSubject.next(null)}),b(([,a])=>a??"Type")),this.selectedExcercise$=this.selectedExcerciseSubject.pipe(b(a=>a??"Excercise")),this.selectedUsername$=this.selectedUsernameSubject.pipe(b(a=>a??"Username")),this.excercises$=V([this.excercisesSubject,this.selectedTypeSubject]).pipe(b(([a,n])=>n?a.filter(o=>o.type===n):a),b(a=>a.map(n=>n.name))),this.excerciseRows$=V([this.excerciseRowsSubject,this.selectedExcerciseSubject,this.selectedTypeSubject,this.selectedUsernameSubject]).pipe(b(([a,n,o,m])=>R(a,o?y(u=>u.type===o):W,n?y(u=>u.excerciseName===n):W,m?y(u=>u.username===m):W))),this.groupedLogs$=V([this.groupedLogsSubject,this.selectedExcerciseSubject,this.selectedTypeSubject,this.selectedUsernameSubject]).pipe(b(([a,n,o,m])=>R(a,D(([O,G])=>{let Ue=R(G,y(([H])=>m?m===H:!0),D(([H,J])=>{let Oe=R(J,y(([z,Ge])=>o?Ge.type===o:!0),y(([z])=>n?z===n:!0),y(z=>z.length>0));return[H,Oe]}),y(([H,J])=>J.length>0));return[O,Ue]}),y(([O,G])=>G.length>0)))),this.personalRecord$=V([this.selectedUsernameSubject,this.selectedExcerciseSubject]).pipe(b(([a,n])=>a&&n?Ce(this.excerciseRowsSubject.value,n,a):null))}ngOnInit(){this.isLoading=!0,this.excerciseLogApiService.getExcerciseLogs().pipe(re(()=>this.isLoading=!1)).subscribe(a=>{this.groupedLogsSubject.next(we(a)),this.excerciseRowsSubject.next(be(this.groupedLogsSubject.value)),this.types=R(a,D(o=>o.type),Z()),this.usernames=R(a,D(o=>o.user),Z());let n=R(a,D(o=>({name:o.name,type:o.type})),he(o=>o.name));this.excercisesSubject.next(n),console.log(ye(this.excerciseRowsSubject.value))})}},e=t;return(()=>{t.\u0275fac=function(n){return new(n||t)}})(),(()=>{t.\u0275cmp=h({type:t,selectors:[["app-excercise-logs-page"]],viewQuery:function(n,o){if(n&1&&xe(ct,7),n&2){let m;ue(m=fe())&&(o.instance=m.first)}},standalone:!0,features:[w],decls:48,vars:25,consts:[[1,"container","my-4"],["type","text","placeholder","Excercise",1,"form-control","mb-2",3,"ngModel","ngbTypeahead","ngModelChange","selectItem","focus","click"],["instance","ngbTypeahead"],[1,"row","mb-2","gx-2"],[1,"col-6"],["ngbDropdown","",1,"d-flex","justify-content-center"],["type","button","ngbDropdownToggle","",1,"btn","btn-outline-primary","w-100","d-flex","justify-content-between","align-items-center"],["ngbDropdownMenu","",1,"w-100"],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[2,"overflow","scroll","max-height","400px"],[1,"d-flex","justify-content-center","align-items-center","border-top","border-1"],[1,"fa","fa-caret-down"],[1,"row","mb-2"],[1,"col-12"],[1,"row"],[1,"form-check","form-switch","d-flex","align-items-center","gap-1"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[4,"ngIf","ngIfElse"],["loadingSpinner",""],["class","container",4,"ngIf"],[1,"container"],["class","mb-3",3,"personalRecord",4,"ngIf"],[3,"groupedExcerciseLogs"],[1,"mb-3",3,"personalRecord"],[3,"excerciseRows"],[1,"position-absolute","top-50","start-50","translate-middle"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(n,o){if(n&1&&(c(0,"div",0)(1,"input",1,2),C("ngModelChange",function(u){return o.excerciseTypeAhead=u})("selectItem",function(u){return o.onExcerciseTypeaheadChange(u.item)})("focus",function(u){return o.focus$.next(u.target.value)})("click",function(u){return o.click$.next(u.target.value),o.excerciseTypeAhead=""}),r(),c(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),d(7),x(8,"titlecase"),x(9,"async"),r(),c(10,"div",7)(11,"button",8),C("click",function(){return o.selectedTypeSubject.next(null)}),d(12,"Clear filter"),r(),l(13,st,3,3,"button",9),r()()(),c(14,"div",4)(15,"div",5)(16,"button",6),d(17),x(18,"titlecase"),x(19,"async"),r(),c(20,"div",7)(21,"div",10)(22,"button",8),C("click",function(){return o.selectedExcerciseSubject.next(null)}),d(23,"Clear filter"),r(),l(24,at,3,3,"button",9),x(25,"async"),r(),c(26,"div",11),v(27,"i",12),r()()()()(),c(28,"div",13)(29,"div",14)(30,"div",5)(31,"button",6),d(32),x(33,"titlecase"),x(34,"async"),r(),c(35,"div",7)(36,"button",8),C("click",function(){return o.selectedUsernameSubject.next(null)}),d(37,"Clear filter"),r(),l(38,pt,3,3,"button",9),r()()()(),c(39,"div",15)(40,"div",14)(41,"div",16)(42,"input",17),C("ngModelChange",function(u){return o.isGrouped=u}),r(),c(43,"label",18),d(44,"Grouped"),r()()()()(),l(45,ut,3,2,"div",19),l(46,xt,4,0,"ng-template",null,20,_e)),n&2){let m=me(47);s(1),p("ngModel",o.excerciseTypeAhead)("ngbTypeahead",o.search),s(6),_(" ",f(8,11,f(9,13,o.selectedType$))," "),s(6),p("ngForOf",o.types),s(4),_(" ",f(18,15,f(19,17,o.selectedExcercise$))," "),s(7),p("ngForOf",f(25,19,o.excercises$)),s(8),_(" ",f(33,21,f(34,23,o.selectedUsername$))," "),s(6),p("ngForOf",o.usernames),s(4),p("ngModel",o.isGrouped),s(3),p("ngIf",!o.isLoading)("ngIfElse",m)}},dependencies:[E,I,Ae,Se,Re,Te,Ie,ve,A,Fe,ke,Me,Pe,je,Le,Be,Ne,De,$e],changeDetection:0})})(),e})();export{ii as ExcerciseLogsPageComponent};
